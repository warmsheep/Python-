# 文件处理
# Python处理文件
## 读文件
**示例一**

```
#读文件
f=open(file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",mode="r",encoding="utf-8")
contents=f.read()
print(contents)
f.close()

#输出
袁俊 女 17610291226 四川 巴中 汉族
林璇 男 17600038683 湖南 娄底 汉族
张三 男 13795932321 四川 成都 汉族
李四 女 18600032938 云南 大理 彝族
杜晓琪 女 17730203984 美国 阿拉斯加 美籍
```
**示例一操作语法解释**

```
file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt"  表示文件路径
mode="r"  表示只读(可以修改为其他)
encoding=“utf-8”  表示将硬盘上0101001 按照 utf-8 的规则去"断句"，再将“断句”后的每一段0101010转换成unicode的 01010101，unicode对照表中有01010101和字符的对应关系。
f.read()  表示读取所有内容，内容是已转换完毕的字符串
f.close() 表示关闭文件
```
**注意**
* PS: 此处的encoding必须和文件在保存时设置的编码一致，不然“断句”会不准确从而造成乱码。

**示例二**

```
f=open(file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",mode="rb")
contents=f.read()
print(contents)
f.close()

#输出
b'\xe8\xa2\x81\xe4\xbf\x8a \xe5\xa5\xb3 17610291226 \xe5\x9b\x9b\xe5\xb7\x9d \xe5\xb7\xb4\xe4\xb8\xad \xe6\xb1\x89\xe6\x97\x8f\n\xe6\x9e\x97\xe7\x92\x87 \xe7\x94\xb7 17600038683 \xe6\xb9\x96\xe5\x8d\x97 \xe5\xa8\x84\xe5\xba\x95 \xe6\xb1\x89\xe6\x97\x8f\n\xe5\xbc\xa0\xe4\xb8\x89 \xe7\x94\xb7 13795932321 \xe5\x9b\x9b\xe5\xb7\x9d \xe6\x88\x90\xe9\x83\xbd \xe6\xb1\x89\xe6\x97\x8f\n\xe6\x9d\x8e\xe5\x9b\x9b \xe5\xa5\xb3 18600032938 \xe4\xba\x91\xe5\x8d\x97 \xe5\xa4\xa7\xe7\x90\x86 \xe5\xbd\x9d\xe6\x97\x8f\n\xe6\x9d\x9c\xe6\x99\x93\xe7\x90\xaa \xe5\xa5\xb3 17730203984 \xe7\xbe\x8e\xe5\x9b\xbd \xe9\x98\xbf\xe6\x8b\x89\xe6\x96\xaf\xe5\x8a\xa0 \xe7\xbe\x8e\xe7\xb1\x8d\n'
```

**示例二操作语法解释**

```
file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt"  表示文件路径
mode="rb"  表示按二进制方式读取
encoding=“utf-8”  表示将硬盘上0101001 按照 utf-8 的规则去"断句"，再将“断句”后的每一段0101010转换成unicode的 01010101，unicode对照表中有01010101和字符的对应关系。
f.read()  表示读取所有内容，内容是已转换完毕的字符串
f.close() 表示关闭文件
```

**示例一与示例二区别**
* 答：示例2打开文件时并未指定encoding,这是为何？是因为直接以rb模式打开了文件 ，rb是指二进制模式，数据读到内存里直接是bytes格式，如果想看内容，还需要手动decode,因此在文件打开阶段，不需要指定编码

**疑问：假如你不知道你要处理的文件是什么编码可怎么办呢？**
* 答：引用chardet模块，方法如下：

**chardet模块使用**
* 安装

# 待补充

**循环文件**

```
f=open(file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",mode="r",encoding="utf-8")

for line in f:
    print(line)

f.close()

#输出
袁俊 女 17610291226 四川 巴中 汉族

林璇 男 17600038683 湖南 娄底 汉族

张三 男 13795932321 四川 成都 汉族

李四 女 18600032938 云南 大理 彝族

杜晓琪 女 17730203984 美国 阿拉斯加 美籍

```

## 写文件
**示例三：写文件**

```
f = open(file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",mode="w",encoding="utf-8")
f.write('Jessie 女 0023928374 加拿大 温哥华 加拿大籍")
f.close()
```

**示例三：写文件操作解释**

```
file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt"  表示文件路径
mode="w"  表示只写
encoding="utf-8"  将要写入的unicode字符串编码成utf-8格式
f.write(...)  将要写入的unicode字符串编码成utf-8格式
f.close()
```

**示例四：二进制写文件**

```
f = open(file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",mode="wb")
f.write('Jessie 女 0023928374 加拿大 温哥华 加拿大籍")
f.close()
```
**示例四：二进制写文件操作解释**

```
file="/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt"  表示文件路径
mode="wb"  表示只以二进制模式写
encoding="utf-8"  将要写入的unicode字符串编码成utf-8格式
f.write(...)  将要写入的unicode字符串编码成utf-8格式
f.close()
```

**注意**
* 文件操作时，以“w”或“wb”打开，则只能写，并且在打开的同时会先将内容清空
* 写到硬盘上时，必须是某种编码的0101010，打开时注意：
  * wb，写入时需要直接传入以某种编码的0101010，即：字节类型
  * w和encoding，写入时需要传入Unicode字符串，内部会根据encoding制定的编码将Unicode字符串转化为该编码的0101010

## 追加
* 把内容追加到文件尾部
**示例五：追加**

```
f = open("/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",'a',encoding="utf-8")

f.write("杜姗姗 女 13324523342 北京 北京 汉族"+"\n") #追加内容并换行
f.close()
```

**运行结果**

```
袁俊 女 17610291226 四川 巴中 汉族
林璇 男 17600038683 湖南 娄底 汉族
张三 男 13795932321 四川 成都 汉族
李四 女 18600032938 云南 大理 彝族
杜晓琪 女 17730203984 美国 阿拉斯加 美籍
杜姗姗 女 13324523342 北京 北京 汉族  #这行是添加的
```

**注意**
* 文件操作时，以 “a”或“ab” 模式打开，则只能追加，即：在原来内容的尾部追加内容
* 写入到硬盘上时，必须是某种编码的0101010，打开时需要注意：
  * ab，写入时需要直接传入以某种编码的0100101，即：字节类型
  * a 和 encoding，写入时需要传入unicode字符串，内部会根据encoding制定的编码将unicode字符串转换为该编码的 010101010

## 读写模式
* 打开模式只有只读、只写、只追加，难道没有可以读写的操作么？当然有

**示例六：读写模式**

```
f = open("/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",'r+',encoding="utf-8")

data=f.read() #可以读内容
f.write("范冰冰 女 11122522378 山东 青岛 汉族"+"\n")
f.close()
```

**上面的内容加到哪里了呢？**
* 答案是追加到了最后面。

**那如果是我想添加到任意位置呢？**
* 答案是可以，又是不可以。。。。，为啥，一会就学

## 写读模式
**示例七：写读模式**

```
f = open("/Users/yuanjun/Python-Note/02-Python基础/99-听课笔记/代码案例文稿/通讯录.txt",'w+',encoding="utf-8")

data = f.read() #可以读内容
print("CONTENTS:",data)
f.write("李晨 男 11122598238 北京 北京 汉族"+"\n")
f.write("王自健 男 010293847 上海 上海 汉族"+"\n")
f.write("杨秋月 女 0280293847 四川 成都 汉族"+"\n")


print("contents:",f.read())

f.close()
```

**输出**

```


```

* 此时查看文件 内容 发现，里面只有3条新增内容，之前的旧内容全没了，事实代表，w+会先把文件清空，再写新内容，相比w模式，只是支持了一个读功能，且还只能读已经写入的新内容。着实没什么卵用。。。

## 文件操作的其它功能
